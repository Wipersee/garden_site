{% load static %}
<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Main page</title>
    <link rel="stylesheet" href="{% static 'css/normilize.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Spectral:wght@300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a0cb13235c.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'css/slider.css' %}" />
    <script src="{% static 'js/slider.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/hamburger.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body>
    <div class="wrapper">
        <div class="content">
            <section class = "section_background ">
                <div class="container " id="rellax">                    
                    <header>
                        <div class="header_top">
                            <div class="header_logo">
                                <img src="{% static 'img/logo.png' %}" alt="Логотип" class="header_logo-img">
                            </div>
                            <div class="header_contacts">
                                <div class="header_contacts-mail">example@gmail.com</div>
                                <div class="header_contacts-hash">|</div>
                                <div class="header_contacts-phone">+380637884507</div>                                
                            </div>
                        </div>
                    </header>
                    <div class="hamburger hamburger--spin" id="menu_button" onclick="s()">
                        <div class="hamburger-box">
                          <div class="hamburger-inner"></div>
                        </div>
                      </div>
                    <nav id = 'menu'>
                        <div class="nav-l"><a href="{% url 'main_page' %}">Про нас</a></div>
                        {% for product in products %}
                        <div class="nav-l"><a href="{% url 'product' product.slug %}">{{ product.product_name }}</a></div>
                        {% endfor %}
                        <div class="nav-l"><a href="#">Контакти</a></div>
                    </nav>
                    <h1 class="name_of_company rellax">Назва компанії</h1>
                    <div class="company_slogan rellax">Ми - запорука якості !</div>
                    <div class="company_bottom-border rellax"></div>
                </div>
            </section>
            <section class="advant">
                <div class="container"> 
                    <h3 class="advant_h3">Чому саме ми ?</h3>
                    <p class="advant_shotPrev">Тому що ми представляємо велику кількість сучасних рішень</p>
                    <div class="advant_a">
                        <div class="advant_a-first">
                            <i class="far fa-check-circle advant_a-first-left" aria-hidden="true"></i>
                            <div class="advant_a-first-right">
                                <h5 class="advant_a-first-right-h5">Перевага один</h5>
                                <p class="advant_a-first-right-p">Ми дуже крута компанія, робимо все вчасно та красиво.</p>
                            </div>
                        </div>
                        <div class="advant_a-first">
                            <i class="far fa-check-circle advant_a-first-left" aria-hidden="true"></i>
                            <div class="advant_a-first-right">
                                <h5 class="advant_a-first-right-h5">Перевага один</h5>
                                <p class="advant_a-first-right-p">Ми дуже крута компанія, робимо все вчасно та красиво. Ніяких клопіт все зробимо самі.</p>
                            </div>
                        </div>
                        <div class="advant_a-first">
                            <i class="far fa-check-circle advant_a-first-left" aria-hidden="true"></i>
                            <div class="advant_a-first-right">
                                <h5 class="advant_a-first-right-h5">Перевага один</h5>
                                <p class="advant_a-first-right-p">Ми дуже крута компанія, робимо все вчасно та красиво.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="reviews">
                <div class="container container-fix">
                    <h4 class="reviews-h4">Відгуки</h4>
                <div class="slider">
                    <div class="slider-container">
                        {% for comment in comments %}
                        <div class="slide-item">
                            <p class="slide_p">{{ comment.comment }}</p>
                            <div class="slide_underwrite"></div>
                            <span class="slide_author">{{ comment.author }}</span>
                        </div>
                        {% endfor %}
                    </div>
                  </div>
                </div>
            </section>
            <section class="order">
                <div class="container">
                    <h5 class="order_h5">Замовити дзвінок</h5>
                    <form method="POST" class="order_form">
                        <!--input type="text" placeholder="Ім'я" class="order_form-name">
                        <input type="tel" placeholder="Телефон" class="order_form-phone"-->
                        {{ form.as_p }}
                        {% csrf_token %}
                        <p class="order_p">Телефон у вигляді +380xxxxxxxxx</p>
                        <button class="order_btn" onclick="server_fetch()">Відправити</button>
                    </form>
                </div>
            </section>
        </div>
    
        <div class="footer">
            <div class="container"> 
            <div class="footer_nav">
                <div class="footer_nav-l nav-l "><a href="{% url 'main_page' %}">Про нас</a></div>
                    {% for product in products %}
                    <div class="nav-l footer_nav-l"><a href="{% url 'product' product.slug %}">{{ product.product_name }}</a></div>
                    {% endfor %}
                <div class="footer_nav-l nav-l "><a href="#">Контакти</a></div>
            </div>
            <div class="footer_underline"></div>
            <div class="footer-company_name">
                <i class="far fa-copyright"></i> Назва компанії
            </div>
            </div>
        </div>
    
    </div>
    <script>
    slider({
            selector: document.querySelector('.slider'),
            });
    </script>
    <script src="{% static 'js/rellax.min.js' %}"></script>
    <script>
      // применяется ко всем блокам с классом .rellax
      var rellax = new Rellax('.rellax',{
        horizontal: true,
        speed: 3,
      });
      function s(){
        btn = document.getElementById('menu_button');
        btn.classList.toggle ('is-active');
        btn.classList.toggle ('pos-fix');
        menu = document.getElementById('menu');
        menu.classList.toggle ('nav_hidden');
      }
      function server_fetch(){
      token = document.querySelector('[name="csrfmiddlewaretoken"]').value;
      var user_name = document.getElementById('client_name_field').value;
      var user_phone = document.getElementById('id_phone_field').value;
      fetch("127.0.0.1:8000", {
            method: 'POST',
                      headers: {
                        Accept: 'application/json',
                        'Content-Type': 'application/json',
                        'X-CSRFToken': token,
                      },
                      body:JSON.stringify({
                        client_name_field: user_name,
                        phone_field:user_phone,
                    }),
        }).then(data => {
            if(data.status == 400){
               console.log(400);
            }else{
                print(200);
                }}
        );
      }
    </script>
</body>
</html>